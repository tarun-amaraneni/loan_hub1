{% extends 'base.html' %}
{% block title %}Users{% endblock %}

{% block content %}
<style>
/* Global & layout */
* { box-sizing: border-box; }
html, body { margin: 0; padding: 0; font-family: "Segoe UI", Arial, sans-serif; }
.content { padding: 12px; }

.top-actions {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
    gap: 10px;
}

.top-actions h3 {
    margin: 0;
    font-size: 20px;
}

.search-box {
    display: flex;
    align-items: center;
    gap: 8px;
}

.search-box input {
    padding: 7px 12px;
    border-radius: 8px;
    border: 1px solid #bfc7d3;
    font-size: 14px;
    width: 220px;
}

.search-box input:focus {
    outline: none;
    border-color: #34495e;
    box-shadow: 0 0 0 3px rgba(52,73,94,0.15);
}

.search-btn {
    background: #34495e;
    color: #fff;
    border: none;
    padding: 7px 14px;
    border-radius: 6px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s ease;
}
.search-btn:hover {
    background: #2c3e50;
}

.add-user-btn {
    background: linear-gradient(135deg, #28a745, #1e7e34);
    color: white;
    padding: 8px 16px;
    border-radius: 8px;
    text-decoration: none;
    font-weight: 600;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    white-space: nowrap;
}

.table-container {
    overflow-x: auto;
    background: #fff;
    padding: 12px;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}

.styled-table {
    width: 100%;
    min-width: 900px;
    border-collapse: collapse;
    table-layout: auto;
}

.styled-table thead th {
    background: #34495e;
    color: yellow;
    padding: 10px;
    text-align: center;
    position: sticky;
    top: 0;
    z-index: 10;
}

.styled-table tbody td {
    padding: 10px;
    border-bottom: 1px solid #ececec;
    text-align: center;
}

.styled-table tbody tr:hover {
    background: #f8fbff;
}

.actions {
    display: flex;
    justify-content: center;
    gap: 6px;
}

.icon-btn {
    width: 34px;
    height: 34px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
    color: #fff;
    font-size: 14px;
    text-decoration: none;
    transition: all 0.2s ease;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
}
.icon-btn.edit { background: linear-gradient(135deg, #007bff, #0056b3); }
.icon-btn.delete { background: linear-gradient(135deg, #dc3545, #b52a37); }
.icon-btn:hover { transform: scale(1.1); }

@media (max-width: 900px) {
    .top-actions { flex-direction: column; align-items: flex-start; }
    .search-box input { width: 100%; }
}
</style>

<div class="content">
    <div class="top-actions">
        <h3>üë• USERS</h3>

        <form method="get" class="search-box">
            <input type="text"
                   name="q"
                   placeholder="Search name / mobile / gen no"
                   value="{{ request.GET.q }}">
            <button class="search-btn">Search</button>
        </form>

        <a href="{% url 'adduser' %}" class="add-user-btn">‚ûï Add User</a>
    </div>

<div class="table-container" style="max-height: calc(6 * 50px + 50px); overflow-y: auto;">
    <table class="styled-table">
        <thead>
            <tr>
                <th>Gen No</th>
                <th>Name</th>
                <th>Mobile</th>
                <th>Address</th>
                <th style="width:120px;">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr>
                <td>{{ user.code }}</td>
                <td>{{ user.name }}</td>
                <td>{{ user.Mobile }}</td>
                <td>{{ user.Address }}</td>
                <td>
                    <div class="actions">
                        <a href="{% url 'edit_user' user.id %}" class="icon-btn edit">‚úèÔ∏è</a>
                        <a href="{% url 'delete_user' user.id %}"
                           class="icon-btn delete"
                           onclick="return confirm('Delete this user?');">üóë</a>
                    </div>
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="5" style="text-align:center; padding:20px;">
                    No users found.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}
